# scenario: basic
# measure -o results/external-sharder results/external-sharder/measure-external.yaml --output-prefix external- --start 2023-11-18T15:33:27Z --end 2023-11-18T15:48:27Z
# measure -o results/external-sharder results/external-sharder/measure-external.yaml --output-prefix external- --start 2023-11-18T17:06:33Z --end 2023-11-18T17:21:33Z
queries:
- name: cpu
  query: sum(rate(container_cpu_usage_seconds_total{namespace=~"sharding-system|webhosting-system", container=~"sharder|manager"}[2m])) by (namespace, pod)
- name: memory
  query: sum(container_memory_rss{namespace=~"sharding-system|webhosting-system", container=~"sharder|manager"}) by (namespace, pod)
- name: network_receive
  query: sum(irate(container_network_receive_bytes_total{namespace=~"sharding-system|webhosting-system", pod=~"sharder-.+|webhosting-operator-.+"}[2m])) by (namespace, pod)
- name: network_transmit
  query: sum(irate(container_network_transmit_bytes_total{namespace=~"sharding-system|webhosting-system", pod=~"sharder-.+|webhosting-operator-.+"}[2m])) by (namespace, pod)
